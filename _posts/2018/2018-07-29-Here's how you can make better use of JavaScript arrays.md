---
layout: post
title: å¦‚ä½•åœ¨ JavaScript ä¸­æ›´å¥½åœ°ä½¿ç”¨æ•°ç»„
categories: JS
description: å¦‚ä½•åœ¨ JavaScript ä¸­æ›´å¥½åœ°ä½¿ç”¨æ•°ç»„
keywords: js, array
---

å…³äºæ•°ç»„æ–¹æ³•çš„ä½¿ç”¨ä¸Š, æˆ‘ä»¬ç»å¸¸ä¼šçŠ¯ä¸€äº›é”™è¯¯, å› æ­¤æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ï¼Œä»¥ç¡®ä¿ä»¥åèƒ½æ­£ç¡®åœ°ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼

## ä½¿ç”¨ `Array.includes` æ›¿ä»£ `Array.indexOf`

> "å¦‚æœéœ€è¦åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸ªå…ƒç´ ï¼Œè¯·ä½¿ç”¨ `Array.indexOf`ã€‚"

æˆ‘è®°å¾—åœ¨æˆ‘å­¦ä¹  JavaScript çš„è¯¾ç¨‹ä¸­æœ‰ç±»ä¼¼çš„è¿™ä¹ˆä¸€å¥è¯ã€‚æ¯«æ— ç–‘é—®ï¼Œè¿™å®Œå…¨æ­£ç¡®ï¼

åœ¨ MDN æ–‡æ¡£ä¸­ï¼Œå¯¹ `Array.indexOf` çš„æè¿°æ˜¯ï¼šè¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚å› æ­¤ï¼Œå¦‚æœåœ¨ä¹‹åçš„ä»£ç ä¸­éœ€è¦ç”¨åˆ°ï¼ˆç»™å®šå…ƒç´ çš„ï¼‰ç´¢å¼•ï¼Œé‚£ä¹ˆ `Array.indexOf` æ˜¯ä¸äºŒä¹‹é€‰ã€‚

ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä»…éœ€è¦çŸ¥é“æ•°ç»„ä¸­æ˜¯å¦åŒ…å«ç»™å®šå…ƒç´ å‘¢ï¼Ÿè¿™æ„å‘³ç€åªæ˜¯æ˜¯ä¸å¦çš„åŒºåˆ«ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸ƒå°”é—®é¢˜ï¼ˆboolean questionï¼‰ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘å»ºè®®ä½¿ç”¨ç›´æ¥è¿”å›å¸ƒå°”å€¼çš„ `Array.includes`ã€‚

```js
'use strict';

const characters = [
  'ironman',
  'black_widow',
  'hulk',
  'captain_america',
  'hulk',
  'thor',
];

console.log(characters.indexOf('hulk'));
// 2
console.log(characters.indexOf('batman'));
// -1

console.log(characters.includes('hulk'));
// true
console.log(characters.includes('batman'));
// false
```

## ä½¿ç”¨ `Array.find` æ›¿ä»£ `Array.filter`

`Array.filter` æ˜¯ä¸€ä¸ªååˆ†æœ‰ç”¨çš„æ–¹æ³•ã€‚å®ƒé€šè¿‡å›è°ƒå‡½æ•°è¿‡æ»¤åŸæ•°ç»„ï¼Œå¹¶å°†è¿‡æ»¤åçš„é¡¹ä½œä¸ºæ–°æ•°ç»„è¿”å›ã€‚æ­£å¦‚å®ƒçš„åå­—æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ–¹æ³•ç”¨äºè¿‡æ»¤ï¼Œï¼ˆä¸€èˆ¬è€Œè¨€ï¼‰ä¼šè·å¾—ä¸€ä¸ªé•¿åº¦æ›´çŸ­çš„æ–°æ•°ç»„ã€‚

ç„¶è€Œï¼Œå¦‚æœçŸ¥é“ç»å›è°ƒå‡½æ•°è¿‡æ»¤åï¼Œåªä¼šå‰©ä½™å”¯ä¸€çš„ä¸€é¡¹ï¼Œé‚£ä¹ˆæˆ‘ä¸å»ºè®®ä½¿ç”¨ `Array.filter`ã€‚æ¯”å¦‚ï¼šä½¿ç”¨ç­‰äºæŸä¸ªå”¯ä¸€ ID ä¸ºè¿‡æ»¤æ¡ä»¶å»è¿‡æ»¤ä¸€ä¸ªæ•°ç»„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`Array.filter` è¿”å›ä¸€ä¸ªä»…æœ‰ä¸€é¡¹çš„æ–°æ•°ç»„ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä»…ä»…æ˜¯ä¸ºäº†è·å– ID ä¸ºç‰¹å®š ID çš„é‚£ä¸€é¡¹ï¼Œè¿™ä¸ªæ–°æ•°ç»„æ˜¾å¾—æ¯«æ— ç”¨å¤„ã€‚

è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹æ€§èƒ½ã€‚ä¸ºäº†è·å–æ‰€æœ‰ç¬¦åˆå›è°ƒå‡½æ•°è¿‡æ»¤æ¡ä»¶çš„é¡¹ï¼Œ`Array.filter` å¿…é¡»éå†æ•´ä¸ªæ•°ç»„ã€‚å¦‚æœåŸæ•°ç»„ä¸­æœ‰æˆåƒä¸Šä¸‡é¡¹ï¼Œå›è°ƒå‡½æ•°éœ€è¦æ‰§è¡Œçš„æ¬¡æ•°æ˜¯ç›¸å½“å¤šçš„ã€‚

ä¸ºé¿å…è¿™äº›æƒ…å†µï¼Œæˆ‘å»ºè®®ä½¿ç”¨ `Array.find`ã€‚å®ƒä¸ `Array.filter` ä¸€æ ·éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œï¼ˆä½†åªæ˜¯è¿”å›ï¼‰ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€é¡¹ã€‚å½“æ‰¾åˆ°ç¬¦åˆå›è°ƒå‡½æ•°è¿‡æ»¤æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå®ƒä¼šç«‹å³åœæ­¢å¾€ä¸‹çš„æœå¯»ã€‚ä¸å†éå†æ•´ä¸ªæ•°ç»„ã€‚

```js
'use strict';

const characters = [
  { id: 1, name: 'ironman' },
  { id: 2, name: 'black_widow' },
  { id: 3, name: 'captain_america' },
  { id: 4, name: 'captain_america' },
];

function getCharacter(name) {
  return character => character.name === name;
}

console.log(characters.filter(getCharacter('captain_america')));
// [
//   { id: 3, name: 'captain_america' },
//   { id: 4, name: 'captain_america' },
// ]

console.log(characters.find(getCharacter('captain_america')));
// { id: 3, name: 'captain_america' }
```

## ä½¿ç”¨ `Array.some` æ›¿ä»£ `Array.find`

æˆ‘æ‰¿è®¤æˆ‘ç»å¸¸çŠ¯è¿™ä¸ªé”™è¯¯ã€‚ä¹‹åï¼Œä¸€ä½æœ‹å‹å»ºè®®æˆ‘å»æŸ¥çœ‹ [MDN æ–‡æ¡£](https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FArray%23Methods_2) ä»¥å¯»æ‰¾æ›´å¥½çš„æ–¹æ³•ã€‚äº‹å®ä¸Šï¼ˆè¿™é”™è¯¯ï¼‰ä¸ä¸Šé¢ `Array.indexOf`/`Array.includes` çš„ä¾‹å­ååˆ†ç›¸åƒã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ `Array.find` éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ï¼ˆç¬¦åˆæ¡ä»¶çš„ï¼‰ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬éœ€è¦çŸ¥é“æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ`Array.find` æ˜¯æœ€å¥½çš„é€‰æ‹©å—ï¼Ÿä¸ä¸€å®šæ˜¯ï¼Œå› ä¸ºå®ƒè¿”å›ä¸€ä¸ªå…ƒç´ ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ `Array.some`ï¼Œå®ƒè¿”å›ä½ éœ€è¦çš„å¸ƒå°”å€¼ã€‚

```js
'use strict';

const characters = [
  { id: 1, name: 'ironman', env: 'marvel' },
  { id: 2, name: 'black_widow', env: 'marvel' },
  { id: 3, name: 'wonder_woman', env: 'dc_comics' },
];

function hasCharacterFrom(env) {
  return character => character.env === env;
}

console.log(characters.find(hasCharacterFrom('marvel')));
// { id: 1, name: 'ironman', env: 'marvel' }

console.log(characters.some(hasCharacterFrom('marvel')));
// true
```

è¡¥å……ä¸€ä¸‹ `Array.some` ä¸ `Array.includes` ä½¿ç”¨ä¸Šçš„åŒºåˆ«ã€‚ä¸¤è€…éƒ½è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸé¡¹æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¹‹ä¸­ï¼Œä¸€æ—¦æ‰¾åˆ°å¯¹åº”çš„é¡¹ï¼Œç«‹å³åœæ­¢éå†æ•°ç»„ã€‚ä¸åŒçš„æ˜¯ `Array.some` çš„å‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œè€Œ `Array.includes` çš„å‚æ•°æ˜¯ä¸€ä¸ªå€¼ï¼ˆå‡ä¸è€ƒè™‘ç¬¬äºŒä¸ªå¯é€‰å‚æ•°ï¼‰ã€‚

å‡è®¾å¸Œæœ›çŸ¥é“å€¼ä¸º `value` çš„é¡¹æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œæ—¢å¯ä»¥ç¼–å†™ä»£ç ï¼š`[].includes(value)`ï¼Œ ä¹Ÿå¯ä»¥ç»™ `Array.some` ä¼ å…¥ `item => item === value` ä½œä¸ºå›è°ƒå‡½æ•°ã€‚`Array.includes` ä½¿ç”¨æ›´ç®€å•ï¼Œ`Array.some` å¯æ“æ§æ€§æ›´å¼ºã€‚

## ä½¿ç”¨ `Array.reduce` æ›¿ä»£ `Array.filter` ä¸ `Array.map` çš„ç»„åˆ

äº‹å®ä¸Šè¯´ï¼Œ`Array.reduce` ä¸å¤ªå®¹æ˜“ç†è§£ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬å…ˆä½¿ç”¨ `Array.filter` è¿‡æ»¤åŸæ•°ç»„ï¼Œä¹‹åï¼ˆå¯¹ç»“æœï¼‰å†è°ƒç”¨ `Array.map` ï¼ˆä»¥è·å–ä¸€ä¸ªæ–°æ•°ç»„ï¼‰ã€‚è¿™çœ‹èµ·ä¼¼ä¹æœ‰ç‚¹é—®é¢˜ï¼Œæ˜¯æˆ‘ä»¬å¿½ç•¥äº†ä»€ä¹ˆå—ï¼Ÿ

è¿™æ ·åšçš„é—®é¢˜æ˜¯ï¼šæˆ‘ä»¬éå†äº†ä¸¤æ¬¡æ•°ç»„ã€‚ç¬¬ä¸€æ¬¡æ˜¯è¿‡æ»¤åŸæ•°ç»„ä»¥è·å–ä¸€ä¸ªé•¿åº¦ç¨çŸ­çš„æ–°æ•°ç»„ï¼Œç¬¬äºŒæ¬¡éå†ï¼ˆ`Array.map`ï¼‰æ˜¯å¯¹ `Array.filter` çš„è¿”å›çš„æ–°æ•°ç»„è¿›è¡ŒåŠ å·¥ï¼Œå†æ¬¡åˆ›é€ äº†ä¸€ä¸ªæ–°æ•°ç»„ï¼ä¸ºå¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼Œæˆ‘ä»¬ç»“åˆä½¿ç”¨äº†ä¸¤ä¸ªæ•°ç»„æ–¹æ³•ã€‚æ¯ä¸ªæ–¹æ³•éƒ½æœ‰å®ƒè‡ªå·±çš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸”ä¾› `Array.map` ä½¿ç”¨çš„ä¸´æ—¶æ•°ç»„æ˜¯ç”± `Array.filter` æä¾›çš„ï¼Œï¼ˆä¸€èˆ¬è€Œè¨€ï¼‰è¯¥æ•°ç»„æ— æ³•å¤ç”¨ã€‚

ä¸ºé¿å…å¦‚æ­¤ä½æ•ˆåœºæ™¯çš„å‡ºç°ï¼Œæˆ‘çš„å»ºè®®æ˜¯ä½¿ç”¨ `Array.reduce` ã€‚ä¸€æ ·çš„ç»“æœï¼Œæ›´å¥½çš„ä»£ç ï¼`Array.reduce` å…è®¸ä½ å°†è¿‡æ»¤ååˆ‡åŠ å·¥è¿‡çš„é¡¹æ”¾è¿›ç´¯åŠ å™¨ä¸­ã€‚ç´¯åŠ å™¨å¯ä»¥æ˜¯éœ€è¦å¾…é€’å¢çš„æ•°å­—ã€å¾…å¡«å……çš„å¯¹è±¡ã€ å¾…æ‹¼æ¥çš„å­—ç¬¦ä¸²æˆ–æ•°ç»„ç­‰ã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `Array.map`ï¼Œï¼ˆä½†æ›´ï¼‰å»ºè®®ä½¿ç”¨ç´¯åŠ å™¨ä¸ºå¾…æ‹¼æ¥æ•°ç»„çš„ `Array.reduce` ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ ¹æ®å˜é‡ `env` çš„å€¼ï¼Œæˆ‘ä»¬ä¼šå°†å®ƒåŠ è¿›ç´¯åŠ å™¨ä¸­æˆ–ä¿æŒç´¯åŠ å™¨ä¸å˜ï¼ˆå³ä¸ä½œä»»ä½•å¤„ç†ï¼‰ã€‚

```js
'use strict';

const characters = [
  { name: 'ironman', env: 'marvel' },
  { name: 'black_widow', env: 'marvel' },
  { name: 'wonder_woman', env: 'dc_comics' },
];

console.log(
  characters
    .filter(character => character.env === 'marvel')
    .map(character => Object.assign({}, character, { alsoSeenIn: ['Avengers'] }))
);
// [
//   { name: 'ironman', env: 'marvel', alsoSeenIn: ['Avengers'] },
//   { name: 'black_widow', env: 'marvel', alsoSeenIn: ['Avengers'] }
// ]

console.log(
  characters
    .reduce((acc, character) => {
      return character.env === 'marvel'
        ? acc.concat(Object.assign({}, character, { alsoSeenIn: ['Avengers'] }))
        : acc;
    }, [])
)
// [
//   { name: 'ironman', env: 'marvel', alsoSeenIn: ['Avengers'] },
//   { name: 'black_widow', env: 'marvel', alsoSeenIn: ['Avengers'] }
// ]
```

### è¿™å°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼

å¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©ã€‚å¦‚æœä½ å¯¹æœ¬æ–‡æœ‰ä»»ä½•æ„è§æˆ–ï¼ˆå…³äºæ•°ç»„æ–¹æ³•ä½¿ç”¨çš„ï¼‰ä¾‹å­éœ€è¦è®¨è®ºï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚å¦‚æœä½ è§‰å¾—æœ¬æ–‡ä¸é”™ï¼Œè¯·ç»™æˆ‘ç‚¹èµ ğŸ‘ å¹¶åˆ†äº«ç»™æ›´å¤šçš„å°ä¼™ä¼´ã€‚æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼
