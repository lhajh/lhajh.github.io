---
layout: post
title: 每日一Vim笔记
categories: Vim
description: 每日一Vim笔记
keywords: Vim
---

读[每日一 Vim](http://liuzhijun.iteye.com/category/270228)笔记

本笔记是在 VS Code 上装的 Vim 插件, 有些功能好像没用

## [每日一Vim（0）入门操作](http://liuzhijun.iteye.com/blog/1826508)

### 基本操作

- `vim helloworld.txt` (普通模式下打开 <如果该文件不存在vim自动新建该文件并打开）
- `:w` 或者 `:write`    #保存正在工作状态的文件
- `:up` 或者`:update`   #保存正在工作状态的文件   up在windows下面不生效
- `:w newfile.txt`    #另存为文件 newfile.txt
- `:up newfile.txt`   #另存为newfile.txt
- `:x`  #保存当前文件再退出
- `:wq` #同上
- `:q!` #不保存文件直接退出

`:x` 和 `:wq` 区别：

1. `:wq` 强制性写入文件并退出（存盘并退出 write and quite）。即使文件没有被修改也强制写入，并更新文件的修改时间。
2. `:x` 写入文件并退出。仅当文件被修改时才写入，并更新文件修改时间；否则不会更新文件修改时间。

### 光标移动

- `h`：向左移动
- `j`：向下移动
- `k`：向上移动
- `l`：向右移动

## [每日一Vim（1）基础进阶](http://liuzhijun.iteye.com/blog/1826918)

### 翻一页/半页

- `ctrl + f`：向下翻一页 forward 前进
- `ctrl + b`：向上翻一页 backward 后退
- `ctrl + d`：向下翻半页 down
- `ctrl + u`：向上翻半页 up

### 光标一次移动一个单词的长度

- `w`：移动到下一个单词的起始处（既然是w，代表的意思就是word，好记吧）
- `W`：移动到下一个单词的起始处

那么w和W它俩有什么区别呢，w会把一个单词理解成由连续的字母或数字或特殊字符，而W却以空格来识别是否到了下一个单词

与之相反的两个操作是b和B

- `b`：移动到前一个单词的起始处
- `B`：移动到前一个单词的起始处（b和B的区别与w和W是同理的）

- `e`：移动到下一个单词的结尾处
- `E`：移动到下一个单词的结尾处

### 光标在一行内的移动

- `0`（零）：移动到行首
- `$`：移动到行未
- `^`：移动到当前行的第一个非空字符处（如果该行首没有空格，那么效果与0是一样的）
- `g_`：移动到当前行的最后一个非空格字符处

### 插入，追加字符

- `i`：在当前光标位置插入字符
- `I`: 在当前行行首插入
- `o`：在当前行往下插入新的一空行
- `O`：在当前行往上插入新的一空行
- `a`：在当前光标后追加字符
- `A`: 在当前行行尾插入
- `r`: 单字符替换
- `R`：替换当前光标的字符直到退出插入模式（按ESC）

### 拷贝一个单词、行首、行尾、整行

- `y[n]w`：拷贝后面 n 个单词，`yw`拷贝当前单词
- `y0`：拷贝的范围是当前光标处到行首
- `y$`：拷贝的范围是当前光标处到行尾
- `y^`：拷贝的范围是当前光标处到本行第一个字符
- `yg_`：拷贝的范围是当前光标处到本行最后一个字符
- `yy/Y`：拷贝当前行
- `nyy`：从当前行开始拷贝n行（这里的n是数字）

拷贝完后用`p`就可以粘贴了。

- 小`p`：粘贴到光标后
- 大`P`：粘贴到光标前

### 删除一个单词，行首、行尾、整行

- `x`：删除当前光标处字符（严格来说x不属于插入，因为你还要按i才能插入）
- `d[n]w`：删除后面 n 个单词，`dw`删除当前光标处单词
- `d0`：删除光标处到行首的字符
- `d$/D`：删除光标处到行尾的字符
- `d^`：删除光标处到本行第一个字符
- `dg_`：删除光标处到本行最后一个字符
- `dd`：删除整行
- `ndd`：删除n行（同样n代表数字）

## [每日一Vim(2) 简单搜索](http://liuzhijun.iteye.com/blog/1827272)

### 撤销恢复

- `u`: 撤销 (undo)
- `ctrl + r`: 重做 (redo)

### 命令计数器

前面知道了翻页的操作，那么我想具体的往上或往下移动那个光标呢，那么你可以使用命令计数器来实现，如果我要向上移动8行，那么直接`8k`就ok了。

### 匹配括号

`%`

### 移动

- `G`: 移动到最后一行
- `gg`: 移动到第一行
- `nG`: 移动到第 n 行行首
- `ngg`: 移动到第 n 行第一个非空字符处
- `:n + enter`: 移动到第 n 行行首

### 简单搜索

- `/string`: 向下搜索 string。搜索出来后，如果有多个，回车后 `n` 继续向下搜索，`N` 继续向上搜索
- `?string`: 向上搜索 string。搜索出来后，如果有多个，回车后 `n` 继续向上搜索，`N` 继续向下搜索

## [每日一Vim（3）替换](http://liuzhijun.iteye.com/blog/1827901)

- `:[addr]s/源字符串/目的字符串/[option]`: 我们可以看出addr和option是可以缺省不填的，他们各个字段的意思是：

    - `[addr]`代表检索范围，缺省表示当前行，`1，10`表示1到10行，`%`代表整个文件等价于`1,$`，而`.,$`代表当前行到文件末尾
    - `s`代表替换的意思
    - `option`代表操作类型，缺省只对第一个匹配的字符进行替换，`g`代表全局替换,`c`代表操作时确认，`gc`可以组合使用

- `:s/aa/bb/g`: 将光标所在行出现的所有包含 aa 的字符串中的 aa 替换为 bb
- `:%s/aa/bb/g`: 将文档中出现的所有包含 aa 的字符串中的 aa 替换为 bb
- `:12,23s/aa/bb/g`: 将从12行到23行中出现的所有包含 aa 的字符串中的 aa 替换为 bb
- `:%s/^/#`: 全文的行首加入 # 字符,批量注释的时候非常有用
- `:%s= *$==`: 将所有行尾多余的空格删除
- `:g/^$/d`: 这里的`g`表示对文章中所有符合要求字符串执行替换操作，`^`表示行首,`$`表示行尾，整个意思是：将所有的空行删除.

## [每日一Vim（4）多文件编辑](http://liuzhijun.iteye.com/blog/1828467)

## [每日一Vim（5）c命令](http://liuzhijun.iteye.com/blog/1829008)

- `C or c$`: 表示修改当前行上光标后面的部分. 进入编辑状态.
- `c0 or c^`: 表示从光标处到当前行行首的部分进行修改，`^` 代表首个非空格处。
- `cc OR S`: 修改当前行. 进入编辑状态.
- `cw`: 从光标所在的位置开始到该单词结束进行修改. 进入编辑状态
- `cfx / cFx`: 这里的 `x` 为一任意字符, `cfx` 表示修改从光标到下一个字符 `x` 之间的文本; `cFx` 表示修改从光标到上一个字符 `x` 之间的文本.
- `cn|`: 修改从光标到当前行的第 `n` 个字符(不包括该字符)间的所有字符, `n` 正整数.
- `cnG / cG`: 这里的 `n` 为一任意自然数, `cnG` 表示修改光标所在位置到第 `n` 行(不包括)之间的所有行; cG 表示修改当前行直至末行.

`c` 命令所删除的数据都存在缓冲区, 可以结合`p/P`命令构成剪切粘贴操作, 方法是:

先进行 `c` 命令, 再按 `Esc` 键返回命令模式, 最后才进行 `p/P` 命令.

## [每日一Vim（6）常用命令总结](http://liuzhijun.iteye.com/blog/1829695)

### 搜索

- `/word`: 从顶部往底部搜索word
- `?word`: 从底部往顶部搜索word
- `/jo[ha]n`: 搜索john或joan

    在 VS Code 中, 目前发现 `\<` `\>` 无效

- `/\< the`: 搜索the或theatre 或then（只要是the开头就行）
- `/the\>`: 搜索the或breathe（只要是the结尾就行）
- `/\< the\>`: 只搜索the
- `/\< ....\>`: 搜索长度为4个字符的字符串
- `/\<fred\>`: 搜索fred，alfred 或者 frederick都不能匹配
- `/fred\|joe`: 搜fred或joe
- `/\<\d\d\d\d\>`: 搜索4位数字的字符串
- `/^\n\{3}`: 查找3个空行的地方

### 替换

- `:%s/old/new/g`: 用new替换文件中出现的所有old
- `:%s/old/new/gc`: 与上面这条的作用一样，只不过每替换一个就要确认一次, 貌似 VS Code 没有
- `:2,35s/old/new/g`: 用new替换2到35行的new
- `:5,$s/old/new/g`: 替换4行之后所有old
- `:%s/^/hello/g`: 用hello替换所有行首，相当于在行首插入hello
- `:%s/$/Harry/g`: 在所有行末加入Harray
- `:%s/onward/forward/gi`: 用forward替换onward，忽略大小写
- `:%s/ *$//g`: 删除所有行末的空格
- `:%s/^ *//g`: 删除所有行首的空格
- `:g/string/d`: 删除所有出现有string的行
- `:v/string/d`: 删除所有不包含string的行
- `:s/Bill/Steve/`: 用Steve替换当前行首次出现的Bill
- `:s/Bill/Steve/g`: 用Steve替换当前行出现的所有Bill
- `:%s#<[^>]\+>##g`: 删除所有HTMl标签，保留文本
- `dit`: 保留当前行html标签，删除文本
- `:%s/^\(.*\)\n\1$/\1/`: Delete lines which appears twice
- `Ctrl+a`: 递增当前光标出的数字
- `Ctrl+x`: 递减当前光标处的数字
- `ggVGg?`: 将全文转换为rot13码，这是一种简单暗号语Rot13，重复执行此命令回复原样

### 大小写

- `Vu`: 当前行转换为小写
- `VU`: 当前行转换为大写，当然对中文无效
- `g~~`: 大小写置换
- `vEU`: 选择性的转换为大小，从光标起始处到
- `vE~`: 也是将选中的大写转小写，小写转大写。
- `ggguG`: 全文小写，其实我们可以拆分3个命令gg/gu/来记忆
- `:set ignorecase`: 搜索时忽略大小写

## [每日一Vim（7）自动补全](http://liuzhijun.iteye.com/blog/1830575)

**注：以下命令都是在插入模式下执行。**

### 单词自动补全：

`CTRL+n` ：当你输入第一个字母的时候，再`CTRL+n`，自动出现下拉菜单，单词默认选中第一个，继续`CTRL+n`，`CTRL+p`可以上下切换，或者用方向键（太慢）
`CTRL+p` ：同上，只是默认的选中的是列表中最后一个单词

### 行自动补全：

`CTRL+x CTRL+l` (l指小写的L )：两个命令组合使用。在插入模式下输入已经存在行的第一个单词，再按这两个键，就会列出该整行出来

### 文件名自动补全：

`CTRL+x CTRL+f` ：插入模式下，按这两个组合键，可以插入当前目录下的文件名。处用在哪里呢，当然是有时候我们要指定默认执行文件的路径，这样就方便啦。

## [每日一Vim（8）---Vim寄存器](http://liuzhijun.iteye.com/blog/1830931)

先抛出一个问题：每次打开Vim，想找一段文本来练练手，于是打开网页copy了一段，问题来了，怎样粘贴到vim的编辑器里头去呢？如果你还在`CTRL+v`的话，说明你还无法割舍Windows，这里暂且告诉你如何粘贴：`SHIFT+INSERT` 两个键联合起来。再来看下面的原理

寄存器是Vim用来存储文件的临时空间，当使用命令`y`（yank）或`d`（delete）复制删除文本时，该文本就会被保存在寄存器中，通过`p`（put）命令插入刚删除或复制的内容。vim的寄存器分为不同的种类：

### 数字寄存器：

在normal模式下输入`:reg`，您是否看到很多`"`（双引号）开头的数字了呢，这些都是寄存器，（如果暂时没看到，那么在对文本做几个操作，比如：`dd`,`yy`等），这些寄存器里保存了最近删除的和复制的文本。

数字寄存器有十个，分别是：`"0`，`"1`，`"2`... `"9`（注意：数字前有个双引号），寄存器`"0`保存上一次复制(y)操作的文本，`"1`到`"9`寄存器保存最近9次删除的文本行（注意这个“行”字），`"1`保存的内容是最最近一次删除的内容（也就是说最后一次执行删除命令保存的内容）`"2`保存的是倒数第二次删除的内容，依此类推，直到`"9`，如果又有新的操作，那么`"9`的内容将会被`"8`的内容替换，先前`"9`的内容将被丢弃。

那么`p`（put）命令粘贴是哪个寄存器中的内容呢？有时候是粘贴的是`"1`寄存器的，有时粘贴的是`"0`寄存器中的，但是总的原则就是粘贴最近一次删除或者复制的内容，如果删除是最近的一次，就是粘贴`"1`的，也就是粘贴刚刚删除的文本，如果复制是最近的一次操作，那么粘贴的内容是`"0`中的，也就是粘贴刚刚复制的内容。

### 字母寄存器：

`"a`，`"b`，`"c`...都是字母寄存器，也许你执行`:reg`的时候看不到这些命令，不要紧，稍后就有了。之前粘贴我们用的都是`p`命令，如果我想粘贴其他寄存器里面的内容呢，你想到了吗？答案就是：`寄存器的名称+p`。现在我们新建一个字母寄存器，把当前三行保存到`"a`寄存器中去，具体操作如下：在normal模式下输入`"a3yy`，这样当前三行就保存在`"a`中去了，粘贴同样在normal模式下，`"3p` 即可。如果是大写字母的寄存器，如执行：`"Cdd`：他的作用是把当前行删除，再把内容追加到`"c`寄存器中，也就是说字母寄存器没有大写之分，只是功能上有区别，大写就是追加，小写是替换。

### 其他寄存器：

`""`：无名寄存器，p命令粘贴的内容，保存最近一次删除或复制的内容。
`"-`：（`-`是个减号）小删除寄存器（small delete register），前面说过要您注意这个”行“字，也就是说并不是所有删除的文本都会保存在数字寄存器中，如果你删除的只是一个单词或字母： `dw`或者`x`，那么这个单词并不会保存在`"1`寄存器中，而是保存在`"-`寄存器里面。所有不包含换行符的删除都会保存在此寄存器中。

`"*` ：这个就是系统寄存器喽，最开始的问题的第二个答案知道了吧

当然还有一些寄存器，这里就不一一介绍了。

## [每日一Vim（9）----缩进](http://liuzhijun.iteye.com/blog/1831548)
